<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>ic_clib (ic) -  - erldocs.com (Erlang Documentation)</title>
    <link rel="search" type="application/opensearchdescription+xml" title="erldocs" href="/search.xml"/>
    <link type="text/css" rel="stylesheet" href="../erldocs.css"/>

    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_require', 'inpage_linkid', '//www.google-analytics.com/plugins/ga/inpage_linkid.js']);
      _gaq.push(['_setAccount', 'UA-44246018-1']);
      _gaq.push(['_setDomainName', 'erldocs.com']);
      _gaq.push(['_trackPageview']);
      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
  </head>

  <body>
    <div id="sidebar" class="inactive">
      <input type="text" id="search" autocomplete="off" placeholder="press TAB to search"/>
      <ul id="results"> </ul>
    </div>

    <div id="content">
      <div style="margin:0px; padding:10px 20px;">
        
  
  &lt;h1&gt;ic_clib&lt;/h1&gt;
  &lt;libsummary&gt;IC C Library Functions&lt;/libsummary&gt;
  &lt;div class=&quot;description&quot;&gt;
    &lt;p&gt;This manual page lists some of the functions in the IC C runtime
      library. &lt;/p&gt;
  &lt;/div&gt;

  &lt;div class=&quot;section&quot;&gt;
    &lt;h4&gt;Allocation and Deallocation Functions&lt;/h4&gt;
    &lt;p&gt;The following functions are used for allocating and
      deallocating a &lt;em&gt;CORBA_Environment&lt;/em&gt; structure.&lt;/p&gt;
  &lt;/div&gt;
  &lt;div class=&quot;functions&quot;&gt;&lt;h4&gt;Functions&lt;/h4&gt;&lt;hr  /&gt;
    &lt;div class=&quot;function&quot;&gt;
      &lt;pre&gt;CORBA_Environment * CORBA_Environment_alloc(int inbufsz, int outbufsz)&lt;/pre&gt;
      
      &lt;div class=&quot;description&quot;&gt;
        &lt;p&gt;This function is used to allocate and initiate the
          &lt;code&gt;CORBA_Environment&lt;/code&gt; structure. In particular, it is used
          to dynamically allocate a CORBA_Environment structure and set
          the default values for the structure&#039;s fields.&lt;/p&gt;
        &lt;p&gt;&lt;em&gt;inbufsize&lt;/em&gt; is the initial size of the input
          buffer.&lt;/p&gt;
        &lt;p&gt;&lt;em&gt;outbufsize&lt;/em&gt; is the initial size of the output
          buffer.&lt;/p&gt;
        &lt;p&gt;&lt;em&gt;CORBA_Environment&lt;/em&gt; is the CORBA 2.0 state structure
          used by the generated stub.&lt;/p&gt;
        &lt;p&gt;This function will set all needed default values and
          allocate buffers the lengths of which are equal to the
          values passed, but will not allocate space for the _to_pid
          and _from_pid fields.&lt;/p&gt;
        &lt;p&gt;To free the space allocated by CORBA_Environment_alloc() do
          as follows.&lt;/p&gt;
        &lt;list type=&quot;bulleted&quot;&gt;
          &lt;item&gt;
            &lt;p&gt;First call CORBA_free for the input and output buffers.&lt;/p&gt;
          &lt;/item&gt;
          &lt;item&gt;
            &lt;p&gt;After freeing the buffer space, call CORBA_free for the
              CORBA_Environment space.&lt;/p&gt;
          &lt;/item&gt;
        &lt;/list&gt;
      &lt;/div&gt;
    &lt;/div&gt;
    &lt;div class=&quot;function&quot;&gt;
      &lt;pre&gt;void CORBA_free(void *p)&lt;/pre&gt;
      
      &lt;div class=&quot;description&quot;&gt;
        &lt;p&gt;Frees allocated space pointed to by &lt;code&gt;p&lt;/code&gt;.&lt;/p&gt;
      &lt;/div&gt;
    &lt;/div&gt;
    &lt;div class=&quot;function&quot;&gt;
      &lt;pre&gt;CORBA_char * CORBA_string_alloc(CORBA_unsigned_long len)&lt;/pre&gt;
      
      &lt;div class=&quot;description&quot;&gt;
        &lt;p&gt;Allocates a (simple) CORBA character string of length &lt;code&gt;len + 1&lt;/code&gt;.&lt;/p&gt;
      &lt;/div&gt;
    &lt;/div&gt;
    &lt;div class=&quot;function&quot;&gt;
      &lt;pre&gt;CORBA_wchar * CORBA_wstring_alloc(CORBA_unsigned_long len)&lt;/pre&gt;
      
      &lt;div class=&quot;description&quot;&gt;
        &lt;p&gt;Allocates a CORBA wide string of length &lt;code&gt;len + 1&lt;/code&gt;.&lt;/p&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;

  &lt;div class=&quot;section&quot;&gt;
    &lt;h4&gt;Exception Functions&lt;/h4&gt;
    &lt;p&gt;Functions for retrieving exception ids and values, and for setting
      exceptions. &lt;/p&gt;
  &lt;/div&gt;
  &lt;div class=&quot;functions&quot;&gt;&lt;h4&gt;Functions&lt;/h4&gt;&lt;hr  /&gt;
    &lt;div class=&quot;function&quot;&gt;
      &lt;pre&gt;CORBA_char * CORBA_exception_id(CORBA_Environment *env)&lt;/pre&gt;
      
      &lt;div class=&quot;description&quot;&gt;
        &lt;p&gt;Returns the exception identity if an exception is set, otherwise
          it returns &lt;code&gt;NULL&lt;/code&gt;.&lt;/p&gt;
      &lt;/div&gt;
    &lt;/div&gt;
    &lt;div class=&quot;function&quot;&gt;
      &lt;pre&gt;void * CORBA_exception_value(CORBA_Environment *env)&lt;/pre&gt;
      
      &lt;div class=&quot;description&quot;&gt;
        &lt;p&gt;Returns the exception value, if an exception is set, otherwise
          it returns &lt;code&gt;NULL&lt;/code&gt;.&lt;/p&gt;
      &lt;/div&gt;
    &lt;/div&gt;
    &lt;div class=&quot;function&quot;&gt;
      &lt;pre&gt;void CORBA_exc_set(CORBA_Environment *env, CORBA_exception_type Major, CORBA_char *Id, CORBA_char *Value)&lt;/pre&gt;
      
      &lt;div class=&quot;description&quot;&gt;
        &lt;p&gt;Sets the exception type, exception identity, and exception value
          in the environment pointed to by &lt;code&gt;env&lt;/code&gt;.&lt;/p&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;

  &lt;div class=&quot;section&quot;&gt;
    &lt;h4&gt;Server Reception&lt;/h4&gt;
    &lt;p&gt;The following function is provided for convenience. &lt;/p&gt;
  &lt;/div&gt;
  &lt;div class=&quot;functions&quot;&gt;&lt;h4&gt;Functions&lt;/h4&gt;&lt;hr  /&gt;
    &lt;div class=&quot;function&quot;&gt;
      &lt;pre&gt;int oe_server_receive(CORBA_Environment *env, oe_map_t *map)&lt;/pre&gt;
      &lt;pre&gt;int oe_server_receive_tmo(CORBA_Environment *env, oe_map_t *map,  unsigned int send_ms, unsigned int recv_ms)&lt;/pre&gt;
      
      &lt;div class=&quot;description&quot;&gt;
        &lt;p&gt;Provides a loop that receives one message, executes the
          operation in question, and in case of a two-way operation
          sends a reply.&lt;/p&gt;
        &lt;p&gt;&lt;code&gt;send_ms&lt;/code&gt; and &lt;code&gt;recv_ms&lt;/code&gt; specify timeout values
          in milliseconds for send and receive, respectively.&lt;/p&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;

  &lt;div class=&quot;section&quot;&gt;
    &lt;h4&gt;Generic Execution Switch and Map Merging&lt;/h4&gt;
    &lt;p&gt;Function for searching for server operation function, and for
      calling it if found. Function for merging maps (see the include
      file &lt;code&gt;ic.h&lt;/code&gt; for definitions). &lt;/p&gt;
  &lt;/div&gt;
  &lt;div class=&quot;functions&quot;&gt;&lt;h4&gt;Functions&lt;/h4&gt;&lt;hr  /&gt;
    &lt;div class=&quot;function&quot;&gt;
      &lt;pre&gt;int oe_exec_switch(CORBA_Object obj, CORBA_Environment *env, oe_map_t *map)&lt;/pre&gt;
      
      &lt;div class=&quot;description&quot;&gt;
        &lt;p&gt;Search for server operation and execute it.&lt;/p&gt;
      &lt;/div&gt;
    &lt;/div&gt;
    &lt;div class=&quot;function&quot;&gt;
      &lt;pre&gt;oe_map_t * oe_merge_maps(oe_map_t *maps, int size)&lt;/pre&gt;
      
      &lt;div class=&quot;description&quot;&gt;
        &lt;p&gt;Merge an array of server maps to one single map.&lt;/p&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;

  &lt;div class=&quot;section&quot;&gt;
    &lt;h4&gt;The CORBA_Environment structure&lt;/h4&gt;
    &lt;p&gt;Here is the complete definition of the CORBA_Environment structure,
      defined in file &lt;em&gt;ic.h&lt;/em&gt;: &lt;/p&gt;
    &lt;pre class=&quot;sh_erlang&quot;&gt;
      /* Environment definition */
      typedef struct {

      /*----- CORBA compatibility part ------------------------*/
      /* Exception tag, initially set to CORBA_NO_EXCEPTION ---*/
      CORBA_exception_type   _major;          

      /*----- External Implementation part - initiated by the user ---*/
      /* File descriptor                                              */
      int                    _fd;             
      /* Size of input buffer                                         */
      int                    _inbufsz;        
      /* Pointer to always dynamically allocated buffer for input     */
      char                  *_inbuf;         
      /* Size of output buffer                                        */
      int                    _outbufsz;       
      /* Pointer to always dynamically allocated buffer for output    */ 
      char                  *_outbuf;        
      /* Size of memory chunks in bytes, used for increasing the output
      buffer, set to &amp;gt;= 32, should be around &amp;gt;= 1024 for performance
      reasons                                                       */ 
      int                    _memchunk;       
      /* Pointer for registered name                                   */
      char                   _regname[256];   
      /* Process identity for caller                                   */
      erlang_pid            *_to_pid;         
      /* Process identity for callee                                  */ 
      erlang_pid            *_from_pid;      

      /*- Internal Implementation part - used by the server/client ---*/
      /* Index for input buffer                                       */
      int                    _iin;            
      /* Index for output buffer                                      */
      int                    _iout;          
      /* Pointer for operation name                                   */
      char                   _operation[256];
      /* Used to count parameters                                    */
      int                    _received;      
      /* Used to identify the caller                                  */
      erlang_pid             _caller;        
      /* Used to identify the call                                     */
      erlang_ref             _unique;         
      /* Exception id field                                           */
      CORBA_char            *_exc_id;        
      /* Exception value field                                        */
      void                  *_exc_value;           

      
      } CORBA_Environment; 
    &lt;/pre&gt;
    &lt;div class=&quot;note&quot;&gt;&lt;h2&gt;Note!&lt;/h2&gt;
      &lt;p&gt;Always set the field values &lt;em&gt;_fd&lt;/em&gt;, &lt;em&gt;_regname&lt;/em&gt;,
        &lt;em&gt;_to_pid&lt;/em&gt; and/or &lt;em&gt;*_from_pid&lt;/em&gt; to appropriate
        application values. These are not automatically set by the
        stubs.&lt;/p&gt;
    &lt;/div&gt;
    &lt;div class=&quot;warning&quot;&gt;&lt;h2&gt;Warning!&lt;/h2&gt;
      &lt;p&gt;Never assign static buffers to the buffer pointers, and never
        set the &lt;em&gt;_memchunk&lt;/em&gt; field to a value less than
        &lt;em&gt;32&lt;/em&gt;.&lt;/p&gt;
    &lt;/div&gt;
  &lt;/div&gt;

  &lt;div class=&quot;section&quot;&gt;
    &lt;h4&gt;SEE ALSO&lt;/h4&gt;
    &lt;p&gt;ic(3), ic_c_protocol(3)
      &lt;/p&gt;
  &lt;/div&gt;
  

      </div>
      <div id="funwrapper">
        <a id="viewfuns">View Functions</a>
        &lt;ul id=&quot;funs&quot; /&gt;
      </div>
    </div>

    <script type="text/javascript">
      var CURRENT_ROOT = "../";
    </script>

    <script type="text/javascript" src="../jquery.js"></script>
    <script type="text/javascript" src="../erldocs_index.js"></script>
    <script type="text/javascript" src="../erldocs.js"></script>
  </body>
</html>
